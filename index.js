const data = {
  day9: [
    { ing: "read", uzb: "o'qimoq" },
    { ing: "play", uzb: "o'ynamoq" },
    { ing: "rain", uzb: "yomg'ir yog'moq" },
    { ing: "run", uzb: "yugurmoq" },
    { ing: "sleep", uzb: "uxlamoq" },
    { ing: "come", uzb: "kelmoq" },
    { ing: "learn", uzb: "o'rganmoq" },
    { ing: "wait", uzb: "kutmoq" },
    { ing: "bark", uzb: "vovullamoq, akillamoq" },
    { ing: "drink", uzb: "ichmoq" },
    { ing: "shout", uzb: "baqirmoq" },
    { ing: "dance", uzb: "raqsga tushmoq" },
    { ing: "call", uzb: "qo'ngiroq qilmoq" },
    { ing: "visit", uzb: "tashrif buyurmoq" },
    { ing: "driver", uzb: "haydovchi" },
    { ing: "drive", uzb: "haydamoq" },
    { ing: "sit", uzb: "o'tirmoq" },
    { ing: "clean", uzb: "tozalmoq" },
    { ing: "swim", uzb: "suzmoq" },
    { ing: "people", uzb: "odamlar" },
    { ing: "study", uzb: "talim olmoq" },
    { ing: "employer", uzb: "ish beruvchi" },
    { ing: "walk", uzb: "yurmoq" },
    { ing: "ask", uzb: "so'ramoq" },
    { ing: "sing", uzb: "kuylamoq" },
    { ing: "listen", uzb: "tinglamoq" },
    { ing: "pupil", uzb: "oquvchi" },
    { ing: "answer", uzb: "javob bermoq" },
    { ing: "parrot", uzb: "to'tiqush" },
    { ing: "speak", uzb: "gapirmoq" },
    { ing: "watch", uzb: "tomosha qilmoq" },
    { ing: "enter", uzb: "kirmoq" },
    { ing: "fly", uzb: "uchmoq" },
    { ing: "correct", uzb: "tog'irlamoq" },
    { ing: "employee", uzb: "xodim, ishchi" },
    { ing: "enjoy", uzb: "rohatlanmoq" },
    { ing: "air-conditioner", uzb: "konditsioner" },
    { ing: "work", uzb: "ishlamoq" },
    { ing: "cool", uzb: "salqinlanmoq, sovutmoq" },
    { ing: "help", uzb: "yordam" },
    { ing: "pedestrian", uzb: "piyoda" },
    { ing: "stop", uzb: "to'xtamoq, to'xtatmoq" },
    { ing: "whistle", uzb: "hushtak chalmoq" },
    { ing: "open", uzb: "ochmoq" },
    { ing: "do", uzb: "bajarmoq" },
    { ing: "go", uzb: "bormoq" },
    { ing: "win", uzb: "g'alaba qozonmoq" },
    { ing: "lose", uzb: "yo'qotmoq" },
    { ing: "begin", uzb: "boshlamoq" },
    { ing: "finish", uzb: "tugatmoq" },
  ],
  day10: [
    { ing: "fridge", uzb: "muzlatgich" },
    { ing: "t-short", uzb: "futbolka" },
    { ing: "bed", uzb: "krovat" },
    { ing: "scarf", uzb: "sharf" },
    { ing: "aquarium", uzb: "akvarium" },
    { ing: "doll", uzb: "qog'irchoq" },
    { ing: "thief", uzb: "og'ri" },
    { ing: "submarine", uzb: "suvosti kemasi" },
    { ing: "border", uzb: "chegara" },
    { ing: "helicopter", uzb: "vertolyot" },
    { ing: "gun", uzb: "qurol" },
    { ing: "palace", uzb: "saroy" },
    { ing: "traffic lights", uzb: "svetafor" },
    { ing: "mill", uzb: "tegirmon" },
    { ing: "bowl", uzb: "kosa" },
    { ing: "hole", uzb: "teshik" },
    { ing: "sock", uzb: "paypoq" },
    { ing: "insect", uzb: "hashorot" },
    { ing: "line", uzb: "navbat" },
    { ing: "swimming pool", uzb: "suzish havzasi" },
    { ing: "rock", uzb: "qoyatosh" },
    { ing: "microbe", uzb: "mikrob" },
    { ing: "mail", uzb: "pochta" },
    { ing: "farm", uzb: "ferma" },
    { ing: "boat", uzb: "qayiq" },
    { ing: "beach", uzb: "sohil, plyaj" },
    { ing: "raccoon", uzb: "yenot" },
    { ing: "zoo", uzb: "hayvnot bog'i" },
    { ing: "bookshelf", uzb: "kitob javoni" },
    { ing: "laptop", uzb: "noutbuk" },
    { ing: "cellphone", uzb: "mobil telefon" },
    { ing: "bellboy", uzb: "hammol" },
    { ing: "receptionist", uzb: "qabulchi" },
    { ing: "kitten", uzb: "mushukcha" },
    { ing: "asistant", uzb: "yordamchi" },
    { ing: "musician", uzb: "musiqachi" },
    { ing: "instrument", uzb: "musiqa asbobi" },
    { ing: "stage", uzb: "sahna" },
    { ing: "gardener", uzb: "bog'bon" },
    { ing: "co-pilot", uzb: "ikkinchi uchuvchi" },
    { ing: "coach", uzb: "murabbiy" },
    { ing: "player", uzb: "o'yinchi" },
    { ing: "notebook", uzb: "daftar" },
    { ing: "airport", uzb: "aeroport" },
    { ing: "tomato", uzb: "pamidor" },
    { ing: "potato", uzb: "kartoshka" },
    { ing: "fork", uzb: "vilka" },
    { ing: "spoon", uzb: "qoshiq" },
    { ing: "map", uzb: "xarita" },
    { ing: "nose", uzb: "burun" },
  ],
  day11: [
    { ing: "argue with", uzb: "tortishmoq" },
    { ing: "bite", uzb: "tishlamoq" },
    { ing: "cure", uzb: "davolamoq" },
    { ing: "date with", uzb: "uchrashmoq" },
    { ing: "ache", uzb: "og'rimoq" },
    { ing: "mayor", uzb: "shahar hokimi" },
    { ing: "plant", uzb: "o'simlik" },
    { ing: "look for", uzb: "qidirmoq" },
    { ing: "migrate", uzb: "ko'chib o'tmoq" },
    { ing: "prepare for", uzb: "tayyorlanmoq" },
    { ing: "deliver", uzb: "yetkazmoq" },
    { ing: "participate in", uzb: "ishtirok etmoq" },
    { ing: "soap opera", uzb: "teleserial" },
    { ing: "harmful", uzb: "zararli" },
    { ing: "destroy", uzb: "yo'q qilmoq" },
    { ing: "donate", uzb: "xayriya qilmoq" },
    { ing: "depart for", uzb: "jo'namoq" },
    { ing: "sign", uzb: "imzo" },
    { ing: "get married", uzb: "turmush qurmoq" },
    { ing: "dig", uzb: "kovlamoq" },
    { ing: "divorce", uzb: "ajrashmoq" },
    { ing: "renovate", uzb: "ta'mirlamoq" },
    { ing: "resign", uzb: "iste'foga chiqmoq" },
    { ing: "knock", uzb: "taqillatmoq" },
    { ing: "plate", uzb: "likopcha" },
    { ing: "stepson", uzb: "o'gay o'g'il" },
    { ing: "flood", uzb: "suv toshqini" },
    { ing: "hide and seek", uzb: "bekinmachoq" },
    { ing: "shiver", uzb: "titramoq" },
    { ing: "plumber", uzb: "santexnik" },
    { ing: "tap", uzb: "kran" },
    { ing: "search for", uzb: "qidirmoq" },
    { ing: "harvest", uzb: "hosilni yig'moq" },
    { ing: "crop", uzb: "hosil" },
    { ing: "flute", uzb: "nay" },
    { ing: "audience", uzb: "tomoshabin" },
    { ing: "iron", uzb: "temir" },
    { ing: "native", uzb: "ona tili" },
    { ing: "blow", uzb: "puflamoq" },
    { ing: "raw", uzb: "xom" },
    { ing: "sunshine", uzb: "quyosh nuri" },
    { ing: "bookshop", uzb: "kitob do'koni" },
    { ing: "relax", uzb: "dam olmoq" },
    { ing: "fight", uzb: "jang qilmoq" },
    { ing: "bake", uzb: "pishirmoq" },
    { ing: "classmate", uzb: "sinfdosh" },
    { ing: "environment", uzb: "atrof-muhit" },
    { ing: "rule", uzb: "qoida" },
    { ing: "hold", uzb: "ushlamoq" },
    { ing: "fix", uzb: "tuzatmoq" },
  ],

  day12: [
    { ing: "argue with", uzb: "baxslashmoq" },
    { ing: "argue with", uzb: "baxslashmoq" },
  ],
  day14: [
    { ing: "butter", uzb: "sariyog'" },
    { ing: "juice", uzb: "sharbat" },
    { ing: "rice", uzb: "guruch" },
    { ing: "honey", uzb: "asal" },
    { ing: "belt", uzb: "kamar" },
    { ing: "glove", uzb: "qo'lqop" },
    { ing: "peanut", uzb: "yeryong'oq" },
    { ing: "candle", uzb: "sham" },
    { ing: "flour", uzb: "un" },
    { ing: "jam", uzb: "murabbo" },
    { ing: "pea", uzb: "no'xot" },
    { ing: "reporter", uzb: "muxbir" },
    { ing: "store", uzb: "saqlamoq" },
    { ing: "guest", uzb: "mexmon" },
    { ing: "banknote", uzb: "banknot, qog'oz pul" },
    { ing: "electricity", uzb: "elektr" },
    { ing: "joke", uzb: "hazil" },
    { ing: "couse", uzb: "sabab bolmoq" },
    { ing: "chew", uzb: "chaynamoq" },
    { ing: "quarrel with", uzb: "bilan janjallashmoq" },
    { ing: "add", uzb: "qo'shmoq" },
  ],
  day15: [
    { ing: "window", uzb: "deraza" },
    { ing: "go fishing", uzb: "baliq ovlashga bormoq" },
    { ing: "cartoon", uzb: "multfilm" },
    { ing: "magazine", uzb: "jurnal" },
    { ing: "go on holiday", uzb: "tatilga chiqmoq" },
    { ing: "hard", uzb: "qattiq, qiyin" },
    { ing: "decision", uzb: "qaror" },
    { ing: "wake up", uzb: "uyg'onmoq" },
    { ing: "early", uzb: "erta, barvaqt" },
    { ing: "take a walk", uzb: "sayr qilmoq" },
    { ing: "island", uzb: "orol" },
    { ing: "cross", uzb: "kesib o'tmoq" },
    { ing: "loudly", uzb: "baland" },
    { ing: "complain", uzb: "shikoyat qilmoq" },
    { ing: "stay", uzb: "qolmoq" },
    { ing: "present", uzb: "sovg'a" },
    { ing: "take a photo", uzb: "suratga olmoq" },
    { ing: "rise", uzb: "kotarilmoq" },
    { ing: "take a break", uzb: "tanaffus qilmoq" },
    { ing: "wear", uzb: "kiymoq" },
    { ing: "queen", uzb: "qirolicha" },
    { ing: "pay", uzb: "to'lamoq" },
    { ing: "build", uzb: "qurmoq" },
    { ing: "cake", uzb: "to'rt" },
    { ing: "king", uzb: "qirol" },
    { ing: "long", uzb: "uzoq" },
    { ing: "marker", uzb: "marker" },
    { ing: "complete", uzb: "bajarmoq" },
    { ing: "on time", uzb: "o'z vaqtida" },
    { ing: "pain", uzb: "og'riq" },
    { ing: "forget", uzb: "unutmoq" },
    { ing: "date", uzb: "sana" },
    { ing: "important", uzb: "muhim" },
    { ing: "teapot", uzb: "choynak" },
    { ing: "water", uzb: "sug'ormoq" },
    { ing: "observe", uzb: "kuzatmoq" },
    { ing: "turn on", uzb: "yoqmoq" },
    { ing: "lights", uzb: "chiroqlar" },
    { ing: "lawyer", uzb: "huquqshunos, advokat" },
    { ing: "draw", uzb: "chizmoq" },
    { ing: "article", uzb: "maqola" },
    { ing: "take a nap", uzb: "mizg'ib olmoq" },
    { ing: "jog", uzb: "yugurmoq" },
    { ing: "join", uzb: "qo'shilmoq" },
    { ing: "arrive", uzb: "yetib kelmoq" },
    { ing: "move", uzb: "ko'chmoq, harakatlanmoq" },
    { ing: "match", uzb: "o'yin" },
    { ing: "dress", uzb: "koylak" },
    { ing: "exercise", uzb: "mashq" },
    { ing: "explain", uzb: "tushuntirmoq" },
  ],
  day16: [
    { ing: "kindergarten", uzb: "bolalar bog'chasi" },
    { ing: "postman", uzb: "pochtalyon" },
    { ing: "package", uzb: "paket, posilka" },
    { ing: "teatime", uzb: "choy vaqti" },
    { ing: "treat", uzb: "davolamoq" },
    { ing: "warm up", uzb: "qizdirmoq, isitmoq" },
    { ing: "streetlight", uzb: "kocha chirog'i" },
    { ing: "dusk", uzb: "shom vaqti, oqshom" },
    { ing: "dawn", uzb: "erta, sahar" },
    { ing: "blooom", uzb: "gullamoq" },
    { ing: "gather", uzb: "yig'ilmoq, to'planmoq" },
    { ing: "sale", uzb: "savdo, sotish" },
    { ing: "government", uzb: "hukumat" },
    { ing: "force", uzb: "kuch" },
    { ing: "stranger", uzb: "begona" },
    { ing: "ban", uzb: "taqiqlamoq" },
    { ing: "celebrate", uzb: "nishonlamoq" },
    { ing: "damage", uzb: "zarar, ziyon" },
    { ing: "vacation", uzb: "tatil" },
    { ing: "ray", uzb: "nur, shula" },
    { ing: "chily", uzb: "juda sovuq, izg'irin" },
    { ing: "lie", uzb: "aldamoq" },
    { ing: "put on", uzb: "kiymoq" },
    { ing: "freeze", uzb: "muzlamoq, muzlatmoq" },
    { ing: "fall", uzb: "sharshara" },
    { ing: "century", uzb: "asr" },
    { ing: "spoil", uzb: "buzilmoq, aynomoq" },
    { ing: "rot", uzb: "chirmoq" },
    { ing: "pass away", uzb: "vafot etmoq" },
    { ing: "export", uzb: "export qilmoq, chetga sotmoq" },
    { ing: "gardening", uzb: "bogdorchilik, bogbonlik" },
    { ing: "monitor", uzb: "tekshirmoq, kuzatmoq" },
    { ing: "situation", uzb: "vaziyat" },
    { ing: "go up", uzb: "kotarilmoq, yuqoriga chiqmoq" },
    { ing: "industry", uzb: "sanoat" },
    { ing: "wasp", uzb: "qovog'ari" },
    { ing: "fly", uzb: "pashsha" },
    { ing: "almost", uzb: "deyarli" },
    { ing: "protect", uzb: "qoida" },
    { ing: "revolve", uzb: "aylanmoq" },
    { ing: "oxygen", uzb: "kislarod" },
    { ing: "produce", uzb: "ishlab chiqarmoq" },
    { ing: "swallow", uzb: "qaldirg'och" },
    { ing: "offer", uzb: "taklif qilmoq" },
    { ing: "prison", uzb: "qamoqxona" },
    { ing: "criminal", uzb: "jinoyatchi" },
    { ing: "wight", uzb: "og'irligi ... bolmoq" },
    { ing: "severe", uzb: "og'ir, kuchli, qattiq" },
  ],
  // Add more weekly words as needed, e.g., day2, day3, etc.
};
document.addEventListener("DOMContentLoaded", () => {
  const languageSelect = document.getElementById("language");
  const wordsTypeSelect = document.getElementById("words-type");
  const weekSelection = document.querySelector(".week-selection");
  const weekNumberInput = document.getElementById("week-number");
  const startBtn = document.getElementById("start-btn");
  const stopBtn = document.getElementById("stop-btn");
  const gameArea = document.querySelector(".game-area");
  const wordDisplay = document.getElementById("word-display");
  const translationInput = document.getElementById("translation-input");
  const doneBtn = document.getElementById("done-btn");
  const scoreDisplay = document.getElementById("score-display");
  const selectArea = document.querySelector(".selection-area");
  const correctWordDisplay = document.getElementById("correct-word-display");
  const noWords = document.getElementById("noWords");
  const refreshBtn = document.getElementById("refresh-btn");
  const endBtn = document.getElementById("end-btn");
  const continueBtn = document.getElementById("continue-btn");

  let words = JSON.parse(JSON.stringify(data));

  let currentLanguage = "en";
  let currentWords = [];
  let score = 0;
  let totalWords = 0;
  let currentWord = "";
  let interval;
  let dayIndex = Object.keys(words)[Object.keys(words).length - 1].slice(3); // songi kunni bilib olish
  let dayWords = null;

  wordsTypeSelect.addEventListener("change", () => {
    if (wordsTypeSelect.value === "weekly") {
      weekSelection.style.display = "block";
    } else {
      weekSelection.style.display = "none";
    }
  });

  function getRandomWord() {
    let n = Math.floor(Math.random() * currentWords.length);
    let res = currentWords[n];
    currentWords.splice(n, 1);
    return res;
  }

  const getWordsType = (words) => {
    currentLanguage = languageSelect.value;
    const wordsType = wordsTypeSelect.value;
    const weekNumber = parseInt(weekNumberInput.value, 10);

    if (wordsType === "daily") {
      dayIndex = Object.keys(words)[Object.keys(words).length - 1].slice(3); // So'nggi kundan boshlaymiz
      currentWords = words[`day${dayIndex}`]; // So'nggi kun so'zlari
    } else if (wordsType === "weekly") {
      const days = Object.keys(words).map((v) => +v.slice(3));
      if (days.includes(weekNumber)) {
        currentWords = words[`day${weekNumber}`];
      } else {
        noWords.innerText =
          "Sorry, that's it daily words are not available. Try entering another day!";
        return 1;
      }
    } else {
      currentWords = Object.values(words).flat(); // Barcha so'zlar
    }
  };

  function startGame() {
    getWordsType(words);
    const wordsType = wordsTypeSelect.value;
    if (currentWords.length == 0 && wordsType == "weekly") {
      refreshWords();
    }
    gameArea.style.display = "block";
    scoreDisplay.style.display = "none";
    score = 0;
    totalWords = 0;
    nextWord();
    startBtn.style.display = "none";
    selectArea.style.display = "none";
  }

  function nextWord() {
    console.log(totalWords);
    const wordsType = wordsTypeSelect.value;
    clearInterval(interval);
    translationInput.value = "";
    if (
      currentWords.length === 0 &&
      (words[`day${dayIndex - 1}`] || words[`day${dayIndex - 2}`]) &&
      wordsType === "daily"
    ) {
      words[`day${dayIndex - 1}`] ? dayIndex-- : (dayIndex -= 2); // Oldingi kun so'zlariga o'tamiz
      currentWords = words[`day${dayIndex}`];
    } else if (totalWords === 50 && wordsType == "weekly") {
      endGame();
    } else if (
      !words[`day${dayIndex - 1}`] &&
      !words[`day${dayIndex - 2}`] &&
      !words[`day${dayIndex}`].length
    ) {
      location.reload();
    }
    if (currentWords.length > 0) {
      currentWord = getRandomWord();
      wordDisplay.textContent =
        currentLanguage === "en" ? currentWord.ing : currentWord.uzb;
      totalWords++;
      interval = setTimeout(checkTranslation, 10000);
    } else {
      endGame();
    }
  }

  function checkTranslation() {
    const translation = translationInput.value.trim().toLowerCase();
    const correctTranslation =
      currentLanguage === "en"
        ? currentWord.uzb.split(",")
        : currentWord.ing.toLowerCase();

    if (translation?.includes(",") && Array.isArray(correctTranslation)) {
      const translate = translation.split(",");
      (correctTranslation.includes(translate[0]) ||
        correctTranslation.includes(translate[1])) &&
        score++;
    } else if (
      (Array.isArray(correctTranslation) &&
        correctTranslation.includes(translation)) ||
      translation == correctTranslation
    ) {
      score++;
    }

    correctWordDisplay.textContent =
      currentLanguage === "en" ? currentWord.uzb : currentWord.ing;
    correctWordDisplay.style.display = "block";
    setTimeout(() => {
      correctWordDisplay.style.display = "none";
    }, 2000);

    nextWord();
  }

  function endGame() {
    clearInterval(interval);
    gameArea.style.display = "none";
    scoreDisplay.style.display = "block";
    const percentage = Math.round((score / totalWords) * 100);
    scoreDisplay.textContent = `You got ${percentage}% correct translations! ${score}/${totalWords}`;
    startBtn.style.display = "inline";
    selectArea.style.display = "inline";
  }

  const refreshWords = () => {
    words = JSON.parse(JSON.stringify(data));
    console.log(words);
    clearInterval(interval);
    endBtn.style.display = "none";
    refreshBtn.style.display = "none";
    continueBtn.style.display = "none";
    doneBtn.style.display = "inline";
    stopBtn.style.display = "inline";
    getWordsType(words);
    score = 0;
    totalWords = 0;
    nextWord();
  };

  translationInput.addEventListener("keydown", (event) => {
    if (event.key === "Enter") {
      checkTranslation();
    }
  });

  startBtn.addEventListener("click", startGame);
  doneBtn.addEventListener("click", checkTranslation);
  stopBtn.addEventListener("click", () => {
    clearInterval(interval);
    endBtn.style.display = "block";
    refreshBtn.style.display = "block";
    continueBtn.style.display = "block";
    doneBtn.style.display = "none";
    stopBtn.style.display = "none";
    // translationInput.style.display = "none";
  });
  endBtn.addEventListener("click", endGame);
  refreshBtn.addEventListener("click", refreshWords);
  continueBtn.addEventListener("click", () => {
    console.log(totalWords);
    checkTranslation();
    endBtn.style.display = "none";
    refreshBtn.style.display = "none";
    continueBtn.style.display = "none";
    doneBtn.style.display = "inline";
    stopBtn.style.display = "inline";
  });
});
